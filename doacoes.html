<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <!--
    ============================================================
    Plataforma ONG — DOAÇÕES
    Entrega I – Fundamentos e Estruturação
    Requisitos nesta página:
      • Estrutura semântica (header/nav/main/footer)
      • Formulário de doação com múltiplos inputs (number, radio, email, checkbox)
      • Validação HTML5 + máscara/formatador de moeda
      • Formulário de newsletter (e-mail + preferências)
      • Comentários explicativos
    ============================================================
  -->
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Como Doar • Plataforma ONG</title>
  <meta name="description" content="Doe para apoiar as ações da ONG e assine nossa newsletter para receber novidades." />

  <!-- CSS do projeto -->
  <link rel="stylesheet" href="css/reset.css" />
  <link rel="stylesheet" href="css/style.css" />
</head>
<body>
  <!-- ===================== Cabeçalho / Navegação ===================== -->
  <header>
    <nav aria-label="Navegação principal do site">
      <ul>
        <li><a href="index.html">Início</a></li>
        <li><a href="sobre.html">Sobre</a></li>
        <li><a href="projetos.html">Projetos</a></li>
        <li><a href="voluntarios.html">voluntarios</a></li>
        <li><a href="doacoes.html" aria-current="page">Como Doar</a></li>
        <li><a href="transparencia.html">Transparência</a></li>
        <li><a href="contato.html">Contato</a></li>
        <li><a href="blog.html">Blog/Notícias</a></li>
      </ul>
    </nav>
  </header>

  <!-- ========================= Conteúdo Principal ========================= -->
  <main id="conteudo-principal">
    <section class="card" aria-labelledby="titulo-doar">
      <h1 id="titulo-doar">Doe e transforme vidas</h1>
      <p>Escolha o valor e a forma de doação. Toda contribuição é importante.</p>
    </section>

    <!-- ===================== Formulário de Doação ===================== -->
    <section class="card" aria-labelledby="titulo-form-doacao">
      <h2 id="titulo-form-doacao">Formulário de Doação</h2>

      <!--
        novalidate: controlaremos a UX pelo JS (foco no primeiro campo inválido)
        Observação: sem backend nesta entrega; simulação de envio com alert.
      -->
      <form id="form-doacao" action="#" method="post" novalidate>
        <!-- Identificação -->
        <fieldset>
          <legend>Seus dados</legend>

          <label for="nome">Nome completo *</label>
          <input id="nome" name="nome" autocomplete="name" required />

          <label for="email">E-mail *</label>
          <input id="email" name="email" type="email" autocomplete="email" required />
        </fieldset>

        <!-- Valor da doação -->
        <fieldset>
          <legend>Valor</legend>

          <!--
            Campo de moeda:
            - inputmode="numeric" para teclado numérico em mobile
            - máscara/formatador em JS (R$ 0,00)
          -->
          <label for="valor">Valor (R$) *</label>
          <input id="valor" name="valor" inputmode="numeric" placeholder="R$ 50,00" required
                 aria-describedby="ajuda-valor" />
          <small id="ajuda-valor">Digite apenas números; formatação aparece automaticamente.</small>

          <!-- Sugestões rápidas -->
          <div role="group" aria-label="Sugestões de valor" class="acoes-rapidas" style="gap:.5rem; margin-top:.5rem;">
            <button type="button" data-valor="50">R$ 50</button>
            <button type="button" data-valor="100">R$ 100</button>
            <button type="button" data-valor="200">R$ 200</button>
          </div>
        </fieldset>

        <!-- Recorrência -->
        <fieldset>
          <legend>Recorrência</legend>
          <label><input type="radio" name="recorrencia" value="unica" checked> Única</label>
          <label><input type="radio" name="recorrencia" value="mensal"> Mensal</label>
        </fieldset>

        <!-- Método de pagamento -->
        <fieldset>
          <legend>Método de pagamento</legend>
          <label><input type="radio" name="pagamento" value="pix" checked> PIX</label>
          <label><input type="radio" name="pagamento" value="cartao"> Cartão</label>
          <label><input type="radio" name="pagamento" value="boleto"> Boleto</label>

          <!-- Área dinâmica: mostra instruções conforme o método -->
          <div id="area-pagamento" class="card" style="margin-top:12px;">
            <!-- conteúdo preenchido via JS -->
          </div>
        </fieldset>

        <!-- Aceite dos termos -->
        <fieldset>
          <legend>Confirmação</legend>
          <label>
            <input type="checkbox" id="termos" required>
            Confirmo que os dados estão corretos e concordo com os termos de doação.
          </label>
        </fieldset>

        <button type="submit">Confirmar doação</button>
      </form>
    </section>

    <!-- ===================== Newsletter ===================== -->
    <section class="card" aria-labelledby="titulo-news">
      <h2 id="titulo-news">Assine nossa Newsletter</h2>
      <p>Receba novidades sobre projetos, campanhas e eventos.</p>

      <form id="form-newsletter" action="#" method="post" novalidate>
        <label for="news-email">E-mail *</label>
        <input id="news-email" name="email" type="email" required placeholder="seunome@email.com" />

        <fieldset>
          <legend>Preferências</legend>
          <label><input type="checkbox" name="pref" value="noticias" checked> Notícias</label>
          <label><input type="checkbox" name="pref" value="eventos"> Eventos</label>
          <label><input type="checkbox" name="pref" value="campanhas"> Campanhas</label>
        </fieldset>

        <button type="submit">Assinar</button>
      </form>
    </section>
  </main>

  <!-- ============================== Rodapé ============================== -->
  <footer>
    <small>&copy; <span id="ano-atual"></span> ONG Exemplo • Todos os direitos reservados</small>
  </footer>

  <!-- ============================== Scripts ============================== -->
  <script>
    // Atualiza ano no rodapé
    document.getElementById('ano-atual').textContent = new Date().getFullYear();

    /*
      ============================================================
      FORMATADOR DE MOEDA (R$)
      ============================================================
      • Aceita só dígitos.
      • Exibe como "R$ 1.234,56" conforme digita.
    */
    const inputValor = document.getElementById('valor');

    function formatBRLFromDigits(digits) {
      // digits = somente números (centavos no fim)
      const n = Number(digits) / 100;
      return n.toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' });
    }

    function onlyDigits(str) {
      return (str || '').replace(/\D/g, '');
    }

    inputValor.addEventListener('input', () => {
      const digits = onlyDigits(inputValor.value).slice(0, 9); // evita valores absurdos
      inputValor.value = formatBRLFromDigits(digits || '0');
      inputValor.setCustomValidity(
        digits === '' || Number(digits) === 0 ? 'Informe um valor maior que zero.' : ''
      );
    });

    // Botões de sugestão de valor
    document.querySelectorAll('[data-valor]').forEach(btn => {
      btn.addEventListener('click', () => {
        const cents = String(Number(btn.dataset.valor) * 100);
        inputValor.value = formatBRLFromDigits(cents);
        inputValor.setCustomValidity('');
      });
    });

    /*
      ============================================================
      MÉTODOS DE PAGAMENTO — área dinâmica
      ============================================================
      • PIX: exibe chave e instrução (simulada).
      • Cartão/Boleto: campos ilustrativos (sem backend nesta entrega).
    */
    const areaPagamento = document.getElementById('area-pagamento');

    function renderPagamento(tipo) {
      if (tipo === 'pix') {
        areaPagamento.innerHTML = `
          <h3>PIX</h3>
          <p>Use a chave PIX abaixo no seu app bancário:</p>
          <p><strong>pix@ong-exemplo.org</strong></p>
          <small>Após concluir no banco, clique em "Confirmar doação".</small>
        `;
      } else if (tipo === 'cartao') {
        areaPagamento.innerHTML = `
          <h3>Cartão (simulação)</h3>
          <label>Número do cartão *</label>
          <input placeholder="0000 0000 0000 0000" inputmode="numeric" required>
          <div class="grid" style="grid-template-columns:1fr 1fr; gap:8px; margin-top:8px;">
            <div>
              <label>Validade *</label>
              <input placeholder="MM/AA" required>
            </div>
            <div>
              <label>CVC *</label>
              <input placeholder="000" inputmode="numeric" maxlength="4" required>
            </div>
          </div>
          <small>Somente para fins didáticos nesta entrega (não processa pagamento real).</small>
        `;
      } else { // boleto
        areaPagamento.innerHTML = `
          <h3>Boleto (simulação)</h3>
          <p>Após confirmar, um boleto será gerado (simulado) para pagamento.</p>
          <small>Fins didáticos nesta entrega.</small>
        `;
      }
    }

    // Estado inicial
    renderPagamento('pix');

    // Troca conforme seleção
    document.querySelectorAll('input[name="pagamento"]').forEach(r => {
      r.addEventListener('change', () => renderPagamento(r.value));
    });

    /*
      ============================================================
      VALIDAÇÃO E SUBMISSÃO (simulada)
      ============================================================
      • Foca no primeiro inválido.
      • Mostra alert de sucesso.
    */
    const formDoacao = document.getElementById('form-doacao');
    formDoacao.addEventListener('submit', (e) => {
      if (!formDoacao.checkValidity()) {
        e.preventDefault();
        const inval = formDoacao.querySelector(':invalid');
        if (inval) inval.focus();
        return;
      }
      // Checa valor > 0
      const digits = onlyDigits(inputValor.value);
      if (!digits || Number(digits) === 0) {
        e.preventDefault();
        inputValor.setCustomValidity('Informe um valor maior que zero.');
        inputValor.reportValidity();
        inputValor.focus();
        return;
      }

      e.preventDefault(); // simulação
      alert('Obrigado! Sua doação foi registrada (simulação para a Entrega I).');
      formDoacao.reset();
      renderPagamento('pix'); // volta para o estado inicial
      inputValor.value = '';  // limpa formatação
    });

    // Newsletter (simples)
    const formNews = document.getElementById('form-newsletter');
    formNews.addEventListener('submit', (e) => {
      if (!formNews.checkValidity()) {
        e.preventDefault();
        const inval = formNews.querySelector(':invalid');
        if (inval) inval.focus();
      } else {
        e.preventDefault();
        alert('Inscrição na newsletter realizada! Obrigado.');
        formNews.reset();
      }
    });
  </script>
</body>
</html>